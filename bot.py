import telebot

TOKEN = "8229658454:AAEdj442M6S-eJjyxlOOsG1oUOWqJw-tz-o"
bot = telebot.TeleBot(TOKEN)

# –†–∞–∑–¥–µ–ª—ã –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
sections = {
    "1": {
        "name": "üöö –î–æ—Å—Ç–∞–≤–∫–∞",
        "topics": {
            "1": {"name": "üìã –°—Ç–æ–ø-–ª–∏—Å—Ç", "text": "1. –ó–∞–π–¥–∏—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç–æ–ø –ª–∏—Å—Ç\n3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç–æ–ø –ª–∏—Å—Ç ‚ãÆ –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞\n4. –û–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ '—Å—Ç–æ–ø-–ª–∏—Å—Ç'\n5. –í —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ —Å–ø—Ä–∞–≤–∞ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–∏—Ç—å - —Ç–∞–∫ –≤—ã –≤–µ—Ä–Ω–µ—Ç–µ –±–ª—é–¥–∞ –≤ –ø—Ä–æ–¥–∞–∂—É\n6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ"},
            "2": {"name": "üí≥ –ü—Ä–æ–±–∏—Ç—å –∑–∞–∫–∞–∑ –≤ –∫–∞—Å—Å—É", "text": "1. –ù–∞–∂–º–∏—Ç–µ –≤–≤–µ—Ä—Ö—É –Ω–∞ '–ú–∞—à–∏–Ω–∫—É' \n2. –í–Ω–∏–∑—É –≤—ã–±—Ä–∞—Ç—å'–°–ê–ú–û–í–´–í–û–ó'\n3. –ü–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ, –Ω–∞–∂–º–∏—Ç–µ '–ü–†–û–ü–£–°–¢–ò–¢–¨'\n4. –ù–∞–∂–º–∏—Ç–µ '–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ' –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞\n5. –ù–∞–∂–º–∏—Ç–µ –≤ –ª–µ–≤–æ–π –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ '–°–ö–ò–î–ö–ò/–ù–ê–î–ë–ê–í–ö–ò' \n6. –î–∞–ª–µ–µ –Ω–∞–∂–∏–º–∞–µ–º '–¶–ï–ù–û–í–´–ï –ö–ê–¢–ï–ì–û–†–ò–ò' –≤—ã–±—Ä–∞—Ç—å '–Ø–Ω–¥–µ–∫—Å.–ï–¥–∞' —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, —Å—Ä–∞–≤–Ω–∏—Ç–µ —Å –∑–∞–∫–∞–∑–æ–º\n7. –°—É–º–º–∞ –≤ –∫–∞—Å—Å–µ –±–æ–ª—å—à–µ,—á–µ–º –≤ –∑–∞–∫–∞–∑–µ -–Ω–∞–∂–∏—Ç–µ '–°–ö–ò–î–ö–ê' –¥–∞–ª–µ–µ '–†–£–ß–ù–ê–Ø –°–ö–ò–î–ö–ê' –≤–Ω–µ—Å–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É. –°—É–º–º–∞ –≤ –∑–∞–∫–∞–∑–µ =—Å—É–º–º–∞ –≤ –∫–∞—Å—Å–µ\n8. –ù–∞–∂–º–∏—Ç–µ —Å—Ç–∞—Ç—É—Å '2.–ì–û–¢–û–í–ò–¢–¨', –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–∫–∞–∑ –Ω–∞–∂–º–∏—Ç–µ '2.–ü–†–ò–ì–û–¢–û–í–õ–ï–ù' —Å–ø—Ä–∞–≤–∞ –Ω–∞–∂–º–∏—Ç–µ '–ó–ê–ö–†–´–¢–¨ –ó–ê–ö–ê–ó'\n9. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã, –≤–≤–µ—Ä—Ö—É –≤–µ–±–µ—Ä–∏—Ç–µ '–ë–ê–ù–ö–û–í–°–ö–ò–ï –ö–ê–†–¢–´' —Ç–∏–ø –æ–ø–ª–∞—Ç—ã '–Ø–ù–î–ï–ö–° –∏–ª–∏ –ö–£–ü–ï–†' –≤–Ω–∏–∑—É '–¢–û–ß–ù–ê–Ø –°–£–ú–ú–ê' –∏ '–û–ü–õ–ê–¢–ò–¢–¨'\n10. –ü–æ–¥–æ–±–Ω–∞—è –≤–∏–¥–µ–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è - https://skrinshoter.ru/vZeYFdBWYBo "},
            "3": {"name": "üì¶ –ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑", "text": "1. –í–≤–µ—Ä—Ö—É –Ω–∞ –º–∞—à–∏–Ω–∫–µ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ + –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ –≤—Å–ø–ª—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ. \n2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–∞—à–∏–Ω–∫—É —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤. \n3. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑, –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ. –í–∞–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞! –í–Ω–∏–∑—É –Ω–∞–∂–º–∏—Ç–µ —Å—Ç–∞—Ç—É—Å '–ì–æ—Ç–æ–≤–∏—Ç—å' —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç, –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω–∏–º–∞–µ–º –Ω–µ–∑–∞–º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ. \n4. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ –±–ª—é–¥–∞, –Ω–∞–∂–∏–º–∞–µ–º —Å—Ç–∞—Ç—É—Å '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω' –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ–º! (–≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è 10 –º–∏–Ω—É—Ç —Å –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è!) \n5. –°–æ–±–∏—Ä–∞–µ–º –∑–∞–∫–∞–∑ —Å—Ç—Ä–æ–≥–æ –ø–æ —Å–ø–∏—Å–∫—É. –ï—Å–ª–∏ –≤—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–±–µ—Ä–µ—Ç–µ –∑–∞–∫–∞–∑ –∏ –∑–∞–±—É–¥–µ—Ç–µ –ø–æ–ª–æ–∂–∏—Ç—å —Å–æ—É—Å –∏–ª–∏ –¥–æ–±–∞–≤–∫—É, –Ω–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤–æ–∑–º–µ—Å—Ç–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç—É. \n6. –°–æ–±—Ä–∞–ª–∏ –∑–∞–∫–∞–∑,–Ω–µ –∑—É–±—É–¥—å—Ç–µ –Ω–∞–∫–ª–µ–∏—Ç—å –ø–ª–æ–º–±—É. \n7. –ö—É—Ä—å–µ—Ä –ø—Ä–∏–µ–∑–∂–∞–µ—Ç –Ω–∞–∂–∏–º–∞–µ–º '–∑–∞–∫—Ä—ã—Ç—å' —á–µ–∫ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –∫ –ø–∞–∫–µ—Ç—É. –í–∞–∂–Ω–æ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∑–∞–∫–∞–∑–∞–ª —Ö–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏, –∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞–∫–∞–∑–∞ "},
        }
    },
    "2": {
        "name": "üîß –ö–∞—Å—Å–∞. –ó–∞–∫–∞–∑—ã –Ω–∞ —Å–∫–ª–∞–¥.–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏",
        "topics": {
            "1": {"name": "–ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É",  "text": "1. –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥. \n2. –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É. "},
            "2": {"name": "–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ —Å–∫–ª–∞–¥", "text": "x = 5 - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π\nname = '–ò–≤–∞–Ω' - —Å—Ç—Ä–æ–∫–∞\nnumbers = [1, 2, 3] - —Å–ø–∏—Å–æ–∫"}
        }
    },
    "3": {
        "name": "üíæ –ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–ª–∞–Ω–∫–æ–≤",
        "topics": {
            "1": {"name": "SQLite", "text": "1. import sqlite3\n2. conn = sqlite3.connect('db.sqlite')\n3. cursor = conn.cursor()\n4. cursor.execute('CREATE TABLE...')"},
            "2": {"name": "PostgreSQL", "text": "1. pip install psycopg2\n2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ .env —Ñ–∞–π–ª–µ\n3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"}
        }
    }
}

@bot.message_handler(commands=['start'])
def start(message):
    keyboard = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add(*[section["name"] for section in sections.values()])
    bot.send_message(message.chat.id, "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ—â–Ω–∏–∫ –§–µ–¥—è! –ë—É–¥—É —Ç–µ–±–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏,–µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏. –í—ã–±–µ—Ä–∏ —Ç–µ–º—É —Å —á–µ–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å?:", reply_markup=keyboard)

@bot.message_handler(func=lambda message: message.text in [s["name"] for s in sections.values()])
def choose_topic(message):
    for section_id, section in sections.items():
        if section["name"] == message.text:
            keyboard = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
            keyboard.add(*[topic["name"] for topic in section["topics"].values()])
            keyboard.add("‚¨ÖÔ∏è –ù–∞–∑–∞–¥")
            bot.send_message(message.chat.id, f"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –≤ —Ä–∞–∑–¥–µ–ª–µ {section['name']}:", reply_markup=keyboard)
            break

@bot.message_handler(func=lambda message: any(
    topic["name"] == message.text for section in sections.values() for topic in section["topics"].values()
))
def show_instruction(message):
    for section in sections.values():
        for topic in section["topics"].values():
            if topic["name"] == message.text:
                bot.send_message(message.chat.id, f"üìñ {topic['name']}:\n\n{topic['text']}")
                return

@bot.message_handler(content_types=['text'])
def handle_question(message):
    question = message.text.lower()
    
    keywords = {
        "—É—Å—Ç–∞–Ω–æ–≤–∫–∞": ["1", "1"],
        "python": ["1", "1"],
        "–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ": ["2", "2"],
        "–∫–æ–¥": ["2", "1"]
    }
    
    for word, path in keywords.items():
        if word in question:
            section_id, topic_id = path
            topic = sections[section_id]["topics"][topic_id]
            bot.send_message(message.chat.id, f"ü§ñ –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø–æ–º–æ–∂–µ—Ç:\n\n{topic['name']}:\n{topic['text']}")
            return
    
    bot.send_message(message.chat.id, "‚ùì –ù–µ –ø–æ–Ω—è–ª –≤–æ–ø—Ä–æ—Å. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –∏–∑ –º–µ–Ω—é –∏–ª–∏ —É—Ç–æ—á–Ω–∏—Ç–µ.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__  == "__main__":
    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    bot.polling(none_stop=True)